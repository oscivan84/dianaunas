{"ast":null,"code":"import _TextField from \"@material-ui/core/esm/TextField\";\nimport _Divider from \"@material-ui/core/esm/Divider\";\nimport _Avatar from \"@material-ui/core/esm/Avatar\";\nimport _IconButton from \"@material-ui/core/esm/IconButton\";\nimport _Icon from \"@material-ui/core/esm/Icon\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\DiazP\\\\Documents\\\\SSmanagm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\DiazP\\\\Documents\\\\SSmanagm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"C:\\\\Users\\\\DiazP\\\\Documents\\\\SSmanagm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\DiazP\\\\Documents\\\\SSmanagm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"C:\\\\Users\\\\DiazP\\\\Documents\\\\SSmanagm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\DiazP\\\\Documents\\\\SSmanagm\\\\src\\\\app\\\\components\\\\chat-box-2\\\\Chatbox.jsx\";\n\nvar _excluded = [\"palette\"];\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { ChatAvatar } from 'app/components';\nimport ScrollBar from 'react-perfect-scrollbar'; // import { getChatRoomByContactId } from \"app/views/chat-box/ChatService\";\n\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (_ref) {\n  var palette = _ref.palette,\n      theme = _objectWithoutProperties(_ref, _excluded);\n\n  return {\n    lightBG: {\n      background: 'rgba(var(--body), 0.03)'\n    },\n    dividerBG: {\n      background: 'rgba(var(--body), 0.15)'\n    }\n  };\n}); // for previewing bot message\n\nvar globalMessageList = [];\n\nvar Chatbox = function Chatbox(_ref2) {\n  var togglePopup = _ref2.togglePopup;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isAlive = _useState2[0],\n      setIsAlive = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      message = _useState4[0],\n      setMessage = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      messageList = _useState6[0],\n      setMessageList = _useState6[1];\n\n  var currentUserId = '7863a6802ez0e277a0f98534';\n  var chatBottomRef = document.querySelector('#chat-scroll');\n  var classes = useStyles();\n\n  var sendMessageOnEnter = function sendMessageOnEnter(event) {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      var tempMessage = message.trim();\n\n      if (tempMessage !== '') {\n        var tempList = _toConsumableArray(messageList);\n\n        var messageObject = {\n          text: tempMessage,\n          contactId: currentUserId\n        };\n        tempList.push(messageObject);\n        globalMessageList.push(messageObject);\n        if (isAlive) setMessageList(tempList);\n        dummyReply();\n      }\n\n      setMessage('');\n    }\n  };\n\n  var dummyReply = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setTimeout(function () {\n                var tempList = _toConsumableArray(messageList);\n\n                var messageObject = {\n                  text: 'Good to hear from you. enjoy!!!',\n                  contactId: 'opponents contact id',\n                  avatar: '/assets/images/faces/13.jpg',\n                  name: 'Frank Powell'\n                };\n                tempList.push(messageObject);\n                globalMessageList.push(messageObject);\n                if (isAlive) setMessageList(globalMessageList);\n              }, 2000);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function dummyReply() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var scrollToBottom = useCallback(function () {\n    if (chatBottomRef) {\n      chatBottomRef.scrollTo({\n        top: chatBottomRef.scrollHeight,\n        behavior: 'smooth'\n      });\n    }\n  }, [chatBottomRef]);\n  useEffect(function () {\n    if (isAlive) {\n      setMessageList([{\n        contactId: '323sa680b3249760ea21rt47',\n        text: 'Do you ever find yourself falling into the “discount trap?”',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '323sa680b3249760ea21rt47',\n        name: 'Frank Powell',\n        avatar: '/assets/images/faces/13.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '7863a6802ez0e277a0f98534',\n        text: 'Giving away your knowledge or product just to gain clients?',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '7863a6802ez0e277a0f98534',\n        name: 'John Doe',\n        avatar: '/assets/images/face-1.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '323sa680b3249760ea21rt47',\n        text: 'Yes',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '323sa680b3249760ea21rt47',\n        name: 'Frank Powell',\n        avatar: '/assets/images/faces/13.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '7863a6802ez0e277a0f98534',\n        text: 'Don’t feel bad. It happens to a lot of us',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '7863a6802ez0e277a0f98534',\n        name: 'John Doe',\n        avatar: '/assets/images/face-1.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '323sa680b3249760ea21rt47',\n        text: 'Do you ever find yourself falling into the “discount trap?”',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '323sa680b3249760ea21rt47',\n        name: 'Frank Powell',\n        avatar: '/assets/images/faces/13.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '7863a6802ez0e277a0f98534',\n        text: 'Giving away your knowledge or product just to gain clients?',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '7863a6802ez0e277a0f98534',\n        name: 'John Doe',\n        avatar: '/assets/images/face-1.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '323sa680b3249760ea21rt47',\n        text: 'Yes',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '323sa680b3249760ea21rt47',\n        name: 'Frank Powell',\n        avatar: '/assets/images/faces/13.jpg',\n        status: 'online',\n        mood: ''\n      }, {\n        contactId: '7863a6802ez0e277a0f98534',\n        text: 'Don’t feel bad. It happens to a lot of us',\n        time: '2018-02-10T08:45:28.291Z',\n        id: '7863a6802ez0e277a0f98534',\n        name: 'John Doe',\n        avatar: '/assets/images/face-1.jpg',\n        status: 'online',\n        mood: ''\n      }]);\n    } // getChatRoomByContactId(currentUserId, \"323sa680b3249760ea21rt47\").then(\n    //   ({ data }) => {\n    //     if (isAlive) {\n    //       setMessageList(data?.messageList);\n    //     }\n    //   }\n    // );\n\n  }, [isAlive]);\n  useEffect(function () {\n    scrollToBottom();\n    return function () {\n      return setIsAlive(false);\n    };\n  }, [messageList, scrollToBottom]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-column h-full\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx('flex justify-between items-center pl-5 py-3 pr-3', classes.lightBG),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ChatAvatar, {\n    src: \"/assets/images/face-2.jpg\",\n    status: \"online\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"mt-0 mb-3px text-14\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 25\n    }\n  }, \"Ryan Todd\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-muted font-medium\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 25\n    }\n  }, \"Active\"))), /*#__PURE__*/React.createElement(_IconButton, {\n    onClick: togglePopup,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(_Icon, {\n    className: \"text-body\",\n    fontSize: \"small\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  }, \"clear\"))), /*#__PURE__*/React.createElement(ScrollBar, {\n    className: \"flex-grow\",\n    id: \"chat-scroll\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  }, messageList.map(function (item, ind) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: clsx({\n        'p-5 flex': true,\n        'justify-end': currentUserId === item.contactId\n      }),\n      key: ind,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }\n    }, currentUserId !== item.contactId && /*#__PURE__*/React.createElement(_Avatar, {\n      src: item.avatar,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ml-3\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 25\n      }\n    }, currentUserId !== item.contactId && /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"mt-0 mb-1 text-14\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 33\n      }\n    }, item.name), /*#__PURE__*/React.createElement(\"div\", {\n      className: clsx('p-2 mb-2 max-w-240 border-radius-4 text-14 whitespace-pre-wrap', classes.lightBG),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 29\n      }\n    }, item.text), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-muted text-13 font-medium\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 29\n      }\n    }, \"1 minute ago\")));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-5 flex justify-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-2 mb-2 flex justify-end items-center max-w-240 bg-light-gray border-radius-4 text-14\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"w-40\",\n    src: \"/assets/images/laptop-1.png\",\n    alt: \"laptop\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"mt-0 mb-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 33\n    }\n  }, \"Asus K555LA.png\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-muted font-medium text-13\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 33\n    }\n  }, \"21.5KB\"))), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-muted text-13 font-medium\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 25\n    }\n  }, \"1 minute ago\")))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Divider, {\n    className: classes.dividerBG,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(_TextField, {\n    placeholder: \"Type here ...\",\n    multiline: true,\n    rowsMax: 4,\n    fullWidth: true,\n    InputProps: {\n      disableUnderline: true,\n      endAdornment: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(_IconButton, {\n        size: \"small\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(_Icon, {\n        className: \"text-body\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 37\n        }\n      }, \"tag_faces\")), /*#__PURE__*/React.createElement(_IconButton, {\n        size: \"small\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(_Icon, {\n        className: \"text-body\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 37\n        }\n      }, \"attachment\"))),\n      classes: {\n        root: 'pl-5 pr-3 py-3 text-body'\n      }\n    },\n    value: message,\n    onChange: function onChange(e) {\n      return setMessage(e.target.value);\n    },\n    onKeyUp: sendMessageOnEnter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default Chatbox;","map":{"version":3,"sources":["C:/Users/DiazP/Documents/SSmanagm/src/app/components/chat-box-2/Chatbox.jsx"],"names":["React","useState","useEffect","useCallback","ChatAvatar","ScrollBar","clsx","makeStyles","useStyles","palette","theme","lightBG","background","dividerBG","globalMessageList","Chatbox","togglePopup","isAlive","setIsAlive","message","setMessage","messageList","setMessageList","currentUserId","chatBottomRef","document","querySelector","classes","sendMessageOnEnter","event","key","shiftKey","tempMessage","trim","tempList","messageObject","text","contactId","push","dummyReply","setTimeout","avatar","name","scrollToBottom","scrollTo","top","scrollHeight","behavior","time","id","status","mood","map","item","ind","disableUnderline","endAdornment","root","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\r\nimport { ChatAvatar } from 'app/components'\r\nimport { IconButton, Icon, Divider, TextField, Avatar } from '@material-ui/core'\r\nimport ScrollBar from 'react-perfect-scrollbar'\r\n// import { getChatRoomByContactId } from \"app/views/chat-box/ChatService\";\r\nimport clsx from 'clsx'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nconst useStyles = makeStyles(({ palette, ...theme }) => ({\r\n    lightBG: {\r\n        background: 'rgba(var(--body), 0.03)',\r\n    },\r\n    dividerBG: {\r\n        background: 'rgba(var(--body), 0.15)',\r\n    },\r\n}))\r\n// for previewing bot message\r\nconst globalMessageList = []\r\n\r\nconst Chatbox = ({ togglePopup }) => {\r\n    const [isAlive, setIsAlive] = useState(true)\r\n    const [message, setMessage] = useState('')\r\n    const [messageList, setMessageList] = useState([])\r\n    const currentUserId = '7863a6802ez0e277a0f98534'\r\n    const chatBottomRef = document.querySelector('#chat-scroll')\r\n\r\n    const classes = useStyles()\r\n\r\n    const sendMessageOnEnter = (event) => {\r\n        if (event.key === 'Enter' && !event.shiftKey) {\r\n            let tempMessage = message.trim()\r\n            if (tempMessage !== '') {\r\n                let tempList = [...messageList]\r\n                let messageObject = {\r\n                    text: tempMessage,\r\n                    contactId: currentUserId,\r\n                }\r\n                tempList.push(messageObject)\r\n                globalMessageList.push(messageObject)\r\n                if (isAlive) setMessageList(tempList)\r\n                dummyReply()\r\n            }\r\n            setMessage('')\r\n        }\r\n    }\r\n\r\n    const dummyReply = async () => {\r\n        setTimeout(() => {\r\n            let tempList = [...messageList]\r\n            let messageObject = {\r\n                text: 'Good to hear from you. enjoy!!!',\r\n                contactId: 'opponents contact id',\r\n                avatar: '/assets/images/faces/13.jpg',\r\n                name: 'Frank Powell',\r\n            }\r\n\r\n            tempList.push(messageObject)\r\n            globalMessageList.push(messageObject)\r\n            if (isAlive) setMessageList(globalMessageList)\r\n        }, 2000)\r\n    }\r\n\r\n    const scrollToBottom = useCallback(() => {\r\n        if (chatBottomRef) {\r\n            chatBottomRef.scrollTo({\r\n                top: chatBottomRef.scrollHeight,\r\n                behavior: 'smooth',\r\n            })\r\n        }\r\n    }, [chatBottomRef])\r\n\r\n    useEffect(() => {\r\n        if (isAlive) {\r\n            setMessageList([\r\n                {\r\n                    contactId: '323sa680b3249760ea21rt47',\r\n                    text:\r\n                        'Do you ever find yourself falling into the “discount trap?”',\r\n                    time: '2018-02-10T08:45:28.291Z',\r\n                    id: '323sa680b3249760ea21rt47',\r\n                    name: 'Frank Powell',\r\n                    avatar: '/assets/images/faces/13.jpg',\r\n                    status: 'online',\r\n                    mood: '',\r\n                },\r\n                {\r\n                    contactId: '7863a6802ez0e277a0f98534',\r\n                    text:\r\n                        'Giving away your knowledge or product just to gain clients?',\r\n                    time: '2018-02-10T08:45:28.291Z',\r\n                    id: '7863a6802ez0e277a0f98534',\r\n                    name: 'John Doe',\r\n                    avatar: '/assets/images/face-1.jpg',\r\n                    status: 'online',\r\n                    mood: '',\r\n                },\r\n                {\r\n                    contactId: '323sa680b3249760ea21rt47',\r\n                    text: 'Yes',\r\n                    time: '2018-02-10T08:45:28.291Z',\r\n                    id: '323sa680b3249760ea21rt47',\r\n                    name: 'Frank Powell',\r\n                    avatar: '/assets/images/faces/13.jpg',\r\n                    status: 'online',\r\n                    mood: '',\r\n                },\r\n                {\r\n                    contactId: '7863a6802ez0e277a0f98534',\r\n                    text: 'Don’t feel bad. It happens to a lot of us',\r\n                    time: '2018-02-10T08:45:28.291Z',\r\n                    id: '7863a6802ez0e277a0f98534',\r\n                    name: 'John Doe',\r\n                    avatar: '/assets/images/face-1.jpg',\r\n                    status: 'online',\r\n                    mood: '',\r\n                },\r\n                {\r\n                    contactId: '323sa680b3249760ea21rt47',\r\n                    text:\r\n                        'Do you ever find yourself falling into the “discount trap?”',\r\n                    time: '2018-02-10T08:45:28.291Z',\r\n                    id: '323sa680b3249760ea21rt47',\r\n                    name: 'Frank Powell',\r\n                    avatar: '/assets/images/faces/13.jpg',\r\n                    status: 'online',\r\n                    mood: '',\r\n                },\r\n                {\r\n                    contactId: '7863a6802ez0e277a0f98534',\r\n                    text:\r\n                        'Giving away your knowledge or product just to gain clients?',\r\n                    time: '2018-02-10T08:45:28.291Z',\r\n                    id: '7863a6802ez0e277a0f98534',\r\n                    name: 'John Doe',\r\n                    avatar: '/assets/images/face-1.jpg',\r\n                    status: 'online',\r\n                    mood: '',\r\n                },\r\n                {\r\n                    contactId: '323sa680b3249760ea21rt47',\r\n                    text: 'Yes',\r\n                    time: '2018-02-10T08:45:28.291Z',\r\n                    id: '323sa680b3249760ea21rt47',\r\n                    name: 'Frank Powell',\r\n                    avatar: '/assets/images/faces/13.jpg',\r\n                    status: 'online',\r\n                    mood: '',\r\n                },\r\n                {\r\n                    contactId: '7863a6802ez0e277a0f98534',\r\n                    text: 'Don’t feel bad. It happens to a lot of us',\r\n                    time: '2018-02-10T08:45:28.291Z',\r\n                    id: '7863a6802ez0e277a0f98534',\r\n                    name: 'John Doe',\r\n                    avatar: '/assets/images/face-1.jpg',\r\n                    status: 'online',\r\n                    mood: '',\r\n                },\r\n            ])\r\n        }\r\n        // getChatRoomByContactId(currentUserId, \"323sa680b3249760ea21rt47\").then(\r\n        //   ({ data }) => {\r\n        //     if (isAlive) {\r\n        //       setMessageList(data?.messageList);\r\n        //     }\r\n        //   }\r\n        // );\r\n    }, [isAlive])\r\n\r\n    useEffect(() => {\r\n        scrollToBottom()\r\n        return () => setIsAlive(false)\r\n    }, [messageList, scrollToBottom])\r\n\r\n    return (\r\n        <div className=\"flex-column h-full\">\r\n            <div\r\n                className={clsx(\r\n                    'flex justify-between items-center pl-5 py-3 pr-3',\r\n                    classes.lightBG\r\n                )}\r\n            >\r\n                <div className=\"flex items-center\">\r\n                    <ChatAvatar\r\n                        src=\"/assets/images/face-2.jpg\"\r\n                        status=\"online\"\r\n                    />\r\n                    <div className=\"ml-3\">\r\n                        <h5 className=\"mt-0 mb-3px text-14\">Ryan Todd</h5>\r\n                        <span className=\"text-muted font-medium\">Active</span>\r\n                    </div>\r\n                </div>\r\n                <IconButton onClick={togglePopup}>\r\n                    <Icon className=\"text-body\" fontSize=\"small\">\r\n                        clear\r\n                    </Icon>\r\n                </IconButton>\r\n            </div>\r\n            <ScrollBar className=\"flex-grow\" id=\"chat-scroll\">\r\n                {messageList.map((item, ind) => (\r\n                    <div\r\n                        className={clsx({\r\n                            'p-5 flex': true,\r\n                            'justify-end': currentUserId === item.contactId,\r\n                        })}\r\n                        key={ind}\r\n                    >\r\n                        {currentUserId !== item.contactId && (\r\n                            <Avatar src={item.avatar} />\r\n                        )}\r\n                        <div className=\"ml-3\">\r\n                            {currentUserId !== item.contactId && (\r\n                                <h5 className=\"mt-0 mb-1 text-14\">\r\n                                    {item.name}\r\n                                </h5>\r\n                            )}\r\n                            <div\r\n                                className={clsx(\r\n                                    'p-2 mb-2 max-w-240 border-radius-4 text-14 whitespace-pre-wrap',\r\n                                    classes.lightBG\r\n                                )}\r\n                            >\r\n                                {item.text}\r\n                            </div>\r\n                            <span className=\"text-muted text-13 font-medium\">\r\n                                1 minute ago\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n\r\n                {/* example of image sent by current user*/}\r\n                <div className=\"p-5 flex justify-end\">\r\n                    <div className=\"ml-3\">\r\n                        <div className=\"p-2 mb-2 flex justify-end items-center max-w-240 bg-light-gray border-radius-4 text-14\">\r\n                            <img\r\n                                className=\"w-40\"\r\n                                src=\"/assets/images/laptop-1.png\"\r\n                                alt=\"laptop\"\r\n                            />\r\n                            <div className=\"ml-3\">\r\n                                <h6 className=\"mt-0 mb-1\">Asus K555LA.png</h6>\r\n                                <span className=\"text-muted font-medium text-13\">\r\n                                    21.5KB\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <span className=\"text-muted text-13 font-medium\">\r\n                            1 minute ago\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </ScrollBar>\r\n            <div>\r\n                <Divider className={classes.dividerBG} />\r\n                <TextField\r\n                    placeholder=\"Type here ...\"\r\n                    multiline\r\n                    rowsMax={4}\r\n                    fullWidth\r\n                    InputProps={{\r\n                        disableUnderline: true,\r\n                        endAdornment: (\r\n                            <div className=\"flex\">\r\n                                <IconButton size=\"small\">\r\n                                    <Icon className=\"text-body\">tag_faces</Icon>\r\n                                </IconButton>\r\n                                <IconButton size=\"small\">\r\n                                    <Icon className=\"text-body\">\r\n                                        attachment\r\n                                    </Icon>\r\n                                </IconButton>\r\n                            </div>\r\n                        ),\r\n                        classes: { root: 'pl-5 pr-3 py-3 text-body' },\r\n                    }}\r\n                    value={message}\r\n                    onChange={(e) => setMessage(e.target.value)}\r\n                    onKeyUp={sendMessageOnEnter}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chatbox\r\n"]},"metadata":{},"sourceType":"module"}